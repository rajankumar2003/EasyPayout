package easyPayouts;

import java.util.*;

import org.springframework.web.bind.annotation.*;

@RestController
@CrossOrigin(origins = "http://localhost:3000")
@RequestMapping("/api")
public class EasyPayOutsController {
	 private final List<Company> companies = Arrays.asList(
		        new Company("c1", "Alpha Corp"), new Company("c2", "Beta Pvt Ltd")
		    );
		    private final List<Account> accounts = Arrays.asList(
		        new Account("a1", "c1", "Alpha Savings"),
		        new Account("a2", "c1", "Alpha Current"),
		        new Account("a3", "c2", "Beta Payroll"),
		        new Account("a4", "c2", "Beta Direct")
		    );
		    @GetMapping("/companies")
		    public List<Company> getCompanies() { return companies; }

		    @GetMapping("/accounts")
		    public List<Account> getAccounts(@RequestParam String companyId) {
		        List<Account> result = new ArrayList<>();
		        for (Account acc : accounts)
		            if (acc.getCompanyId().equals(companyId)) result.add(acc);
		        return result;
		    }

		    @GetMapping("/account-data")
		    public AccountData getAccountData(@RequestParam String accountId) {
		        List<Transaction> txs;
		        double balance;
		        if ("a1".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("07/05/2024 01:04 PM", 21337, 21337, "1000000", "AC0CF7RRUY407QHU"),
		                new Transaction("04/05/2024 12:38 PM", 34578, 55915, "CMS4136431811", "0104SLNEFTPL")
		            );
		            balance = txs.get(1).getAcBalance();
		        } else if ("a2".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("10/05/2024 09:14 AM", 50000, 50000, "2000011", "AC0CF7RRUY408XYZ"),
		                new Transaction("11/05/2024 03:20 PM", 52000, 102000, "CMS4145551991", "0105SLRTGHTPL")
		            );
		            balance = txs.get(1).getAcBalance();
		        }
		        // Repeat and add for other accountIds...
		        else {
		            txs = new ArrayList<>();
		            balance = 0.0;
		        }
		        return new AccountData(accountId, balance, txs);
		    }

		    @GetMapping("/account-data1")
		    public AccountData getAccountData1(@RequestParam String accountId) {
		      
		        List<Transaction> txs = Arrays.asList(
		            new Transaction("06/05/2024 01:60 PM", 34537, 34537, "1000000", "AC0CF7RRUY407QHU"),
		            new Transaction("09/05/2024 02:38 PM", 10178, 44715, "CMS4136431811", "0104SLNEFTPL")
		        );
		        double balance = txs.get(1).getAcBalance(); 
		        return new AccountData(accountId, balance, txs);
		    }
}
