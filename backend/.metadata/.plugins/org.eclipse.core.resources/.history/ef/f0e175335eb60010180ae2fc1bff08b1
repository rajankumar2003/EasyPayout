package easyPayouts;

import java.util.*;

import org.springframework.web.bind.annotation.*;

@RestController
@CrossOrigin(origins = "http://localhost:3000")
@RequestMapping("/api")
public class EasyPayOutsController {
	 private final List<Company> companies = Arrays.asList(
		        new Company("c1", "Alpha Corp"), new Company("c2", "Beta Pvt Ltd")
		    );
		    private final List<Account> accounts = Arrays.asList(
		        new Account("a1", "c1", "Alpha Savings"),
		        new Account("a2", "c1", "Alpha Current"),
		        new Account("a3", "c2", "Beta Payroll"),
		        new Account("a4", "c2", "Beta Direct")
		    );
		    @GetMapping("/companies")
		    public List<Company> getCompanies() { return companies; }

		    @GetMapping("/accounts")
		    public List<Account> getAccounts(@RequestParam String companyId) {
		        List<Account> result = new ArrayList<>();
		        for (Account acc : accounts)
		            if (acc.getCompanyId().equals(companyId)) result.add(acc);
		        return result;
		    }

		    @GetMapping("/account-data")
		    public AccountData getAccountData(@RequestParam String accountId) {
		        List<Transaction> txs;
		        double balance;
		        if ("a1".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("07/05/2024 01:04 PM", 21337, 21337, "1000000", "AC0CF7RRUY407QHU"),
		                new Transaction("04/05/2024 12:38 PM", 34578, 55915, "CMS4136431811", "0104SLNEFTPL")
		            );
		            balance = txs.get(1).getAcBalance();
		        } else if ("a2".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("10/05/2024 09:14 AM", 50000, 50000, "2000011", "AC0CF7RRUY408XYZ"),
		                new Transaction("11/05/2024 03:20 PM", 52000, 102000, "CMS4145551991", "0105SLRTGHTPL")
		            );
		            balance = txs.get(1).getAcBalance();
		        } else if ("a3".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("12/05/2024 08:10 AM", 12000, 12000, "3000002", "BETAPA567UPI"),
		                new Transaction("14/05/2024 01:45 PM", 25000, 37000, "CMS4123456789", "BETAPA567NEFT")
		            );
		            balance = txs.get(1).getAcBalance();
		        } else if ("a4".equals(accountId)) {
		            txs = Arrays.asList(
		                new Transaction("18/05/2024 08:20 AM", 16000, 16000, "4000002", "BETADIR890UPI"),
		                new Transaction("20/05/2024 03:15 PM", 32000, 48000, "CMS4198765432", "BETADIR890NEFT")
		            );
		            balance = txs.get(1).getAcBalance();
		        } else {
		            txs = new ArrayList<>();
		            balance = 0.0;
		        }
		        return new AccountData(accountId, balance, txs);
		    }
}
